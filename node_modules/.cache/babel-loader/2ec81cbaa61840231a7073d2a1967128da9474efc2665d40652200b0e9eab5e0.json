{"ast":null,"code":"import { ADD_TO_CART, REMOVE_FROM_CART, INCREMENT_ITEM, DECREMENT_ITEM, CLEAR_CART } from './actions';\nconst initialState = {\n  cart: JSON.parse(localStorage.getItem('cart')) || [] // Відновлюємо кошик із localStorage\n};\nconst cartReducer = (state = initialState, action) => {\n  let updatedCart;\n  switch (action.type) {\n    case ADD_TO_CART:\n      const existingItemIndex = state.cart.findIndex(item => item.id === action.payload.id);\n      if (existingItemIndex >= 0) {\n        updatedCart = [...state.cart];\n        updatedCart[existingItemIndex].quantity += action.payload.quantity;\n      } else {\n        updatedCart = [...state.cart, {\n          ...action.payload\n        }];\n      }\n      // Зберігаємо новий кошик в localStorage\n      localStorage.setItem('cart', JSON.stringify(updatedCart));\n      return {\n        ...state,\n        cart: updatedCart\n      };\n    case REMOVE_FROM_CART:\n      updatedCart = state.cart.filter(item => item.id !== action.payload);\n      localStorage.setItem('cart', JSON.stringify(updatedCart));\n      return {\n        ...state,\n        cart: updatedCart\n      };\n    case INCREMENT_ITEM:\n      updatedCart = state.cart.map(item => item.id === action.payload ? {\n        ...item,\n        quantity: item.quantity + 1\n      } : item);\n      localStorage.setItem('cart', JSON.stringify(updatedCart));\n      return {\n        ...state,\n        cart: updatedCart\n      };\n    case DECREMENT_ITEM:\n      updatedCart = state.cart.map(item => item.id === action.payload && item.quantity > 1 ? {\n        ...item,\n        quantity: item.quantity - 1\n      } : item);\n      localStorage.setItem('cart', JSON.stringify(updatedCart));\n      return {\n        ...state,\n        cart: updatedCart\n      };\n    case CLEAR_CART:\n      localStorage.removeItem('cart');\n      return {\n        ...state,\n        cart: []\n      };\n    default:\n      return state;\n  }\n};\nexport default cartReducer;","map":{"version":3,"names":["ADD_TO_CART","REMOVE_FROM_CART","INCREMENT_ITEM","DECREMENT_ITEM","CLEAR_CART","initialState","cart","JSON","parse","localStorage","getItem","cartReducer","state","action","updatedCart","type","existingItemIndex","findIndex","item","id","payload","quantity","setItem","stringify","filter","map","removeItem"],"sources":["D:/2 курс Системна Інженерія/Вебка/Web-technologies-and-web-design-11/Web-technologies-and-web-design-11/ecommerce-app/src/redux/reducers.js"],"sourcesContent":["import { ADD_TO_CART, REMOVE_FROM_CART, INCREMENT_ITEM, DECREMENT_ITEM, CLEAR_CART } from './actions';\r\n\r\nconst initialState = {\r\n  cart: JSON.parse(localStorage.getItem('cart')) || []  // Відновлюємо кошик із localStorage\r\n};\r\n\r\nconst cartReducer = (state = initialState, action) => {\r\n  let updatedCart;\r\n\r\n  switch (action.type) {\r\n    case ADD_TO_CART:\r\n      const existingItemIndex = state.cart.findIndex(item => item.id === action.payload.id);\r\n      if (existingItemIndex >= 0) {\r\n        updatedCart = [...state.cart];\r\n        updatedCart[existingItemIndex].quantity += action.payload.quantity;\r\n      } else {\r\n        updatedCart = [...state.cart, { ...action.payload }];\r\n      }\r\n      // Зберігаємо новий кошик в localStorage\r\n      localStorage.setItem('cart', JSON.stringify(updatedCart));\r\n      return { ...state, cart: updatedCart };\r\n\r\n    case REMOVE_FROM_CART:\r\n      updatedCart = state.cart.filter(item => item.id !== action.payload);\r\n      localStorage.setItem('cart', JSON.stringify(updatedCart));\r\n      return { ...state, cart: updatedCart };\r\n\r\n    case INCREMENT_ITEM:\r\n      updatedCart = state.cart.map(item =>\r\n        item.id === action.payload ? { ...item, quantity: item.quantity + 1 } : item\r\n      );\r\n      localStorage.setItem('cart', JSON.stringify(updatedCart));\r\n      return { ...state, cart: updatedCart };\r\n\r\n    case DECREMENT_ITEM:\r\n      updatedCart = state.cart.map(item =>\r\n        item.id === action.payload && item.quantity > 1 ? { ...item, quantity: item.quantity - 1 } : item\r\n      );\r\n      localStorage.setItem('cart', JSON.stringify(updatedCart));\r\n      return { ...state, cart: updatedCart };\r\n\r\n    case CLEAR_CART:\r\n      localStorage.removeItem('cart');\r\n      return { ...state, cart: [] };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default cartReducer;\r\n"],"mappings":"AAAA,SAASA,WAAW,EAAEC,gBAAgB,EAAEC,cAAc,EAAEC,cAAc,EAAEC,UAAU,QAAQ,WAAW;AAErG,MAAMC,YAAY,GAAG;EACnBC,IAAI,EAAEC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,CAAE;AACxD,CAAC;AAED,MAAMC,WAAW,GAAGA,CAACC,KAAK,GAAGP,YAAY,EAAEQ,MAAM,KAAK;EACpD,IAAIC,WAAW;EAEf,QAAQD,MAAM,CAACE,IAAI;IACjB,KAAKf,WAAW;MACd,MAAMgB,iBAAiB,GAAGJ,KAAK,CAACN,IAAI,CAACW,SAAS,CAACC,IAAI,IAAIA,IAAI,CAACC,EAAE,KAAKN,MAAM,CAACO,OAAO,CAACD,EAAE,CAAC;MACrF,IAAIH,iBAAiB,IAAI,CAAC,EAAE;QAC1BF,WAAW,GAAG,CAAC,GAAGF,KAAK,CAACN,IAAI,CAAC;QAC7BQ,WAAW,CAACE,iBAAiB,CAAC,CAACK,QAAQ,IAAIR,MAAM,CAACO,OAAO,CAACC,QAAQ;MACpE,CAAC,MAAM;QACLP,WAAW,GAAG,CAAC,GAAGF,KAAK,CAACN,IAAI,EAAE;UAAE,GAAGO,MAAM,CAACO;QAAQ,CAAC,CAAC;MACtD;MACA;MACAX,YAAY,CAACa,OAAO,CAAC,MAAM,EAAEf,IAAI,CAACgB,SAAS,CAACT,WAAW,CAAC,CAAC;MACzD,OAAO;QAAE,GAAGF,KAAK;QAAEN,IAAI,EAAEQ;MAAY,CAAC;IAExC,KAAKb,gBAAgB;MACnBa,WAAW,GAAGF,KAAK,CAACN,IAAI,CAACkB,MAAM,CAACN,IAAI,IAAIA,IAAI,CAACC,EAAE,KAAKN,MAAM,CAACO,OAAO,CAAC;MACnEX,YAAY,CAACa,OAAO,CAAC,MAAM,EAAEf,IAAI,CAACgB,SAAS,CAACT,WAAW,CAAC,CAAC;MACzD,OAAO;QAAE,GAAGF,KAAK;QAAEN,IAAI,EAAEQ;MAAY,CAAC;IAExC,KAAKZ,cAAc;MACjBY,WAAW,GAAGF,KAAK,CAACN,IAAI,CAACmB,GAAG,CAACP,IAAI,IAC/BA,IAAI,CAACC,EAAE,KAAKN,MAAM,CAACO,OAAO,GAAG;QAAE,GAAGF,IAAI;QAAEG,QAAQ,EAAEH,IAAI,CAACG,QAAQ,GAAG;MAAE,CAAC,GAAGH,IAC1E,CAAC;MACDT,YAAY,CAACa,OAAO,CAAC,MAAM,EAAEf,IAAI,CAACgB,SAAS,CAACT,WAAW,CAAC,CAAC;MACzD,OAAO;QAAE,GAAGF,KAAK;QAAEN,IAAI,EAAEQ;MAAY,CAAC;IAExC,KAAKX,cAAc;MACjBW,WAAW,GAAGF,KAAK,CAACN,IAAI,CAACmB,GAAG,CAACP,IAAI,IAC/BA,IAAI,CAACC,EAAE,KAAKN,MAAM,CAACO,OAAO,IAAIF,IAAI,CAACG,QAAQ,GAAG,CAAC,GAAG;QAAE,GAAGH,IAAI;QAAEG,QAAQ,EAAEH,IAAI,CAACG,QAAQ,GAAG;MAAE,CAAC,GAAGH,IAC/F,CAAC;MACDT,YAAY,CAACa,OAAO,CAAC,MAAM,EAAEf,IAAI,CAACgB,SAAS,CAACT,WAAW,CAAC,CAAC;MACzD,OAAO;QAAE,GAAGF,KAAK;QAAEN,IAAI,EAAEQ;MAAY,CAAC;IAExC,KAAKV,UAAU;MACbK,YAAY,CAACiB,UAAU,CAAC,MAAM,CAAC;MAC/B,OAAO;QAAE,GAAGd,KAAK;QAAEN,IAAI,EAAE;MAAG,CAAC;IAE/B;MACE,OAAOM,KAAK;EAChB;AACF,CAAC;AAED,eAAeD,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}